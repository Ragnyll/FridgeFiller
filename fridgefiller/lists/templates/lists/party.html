{% extends "base_sidebar.html" %}

{% block title %}
  {{ party.name }}
{% endblock %}

{% block content %}
  <h1 class="text-center">{{ party }}</h1>
  <br>
  
  <h2 class="text-center">{{party.name}}'s Pantry</h2>


  <h2 class="text-center">Party Shopping Lists:</h2>
  <table class="table table-borderless">
    <tbody>
      {% for list in party_lists %}
        <tr class="shopping-list-row">
          <td>
            <a href="/lists/{{ list.id }}/">
              <h4>{{ list.name}}</h4>
            </a>
          </td>
          <td>
            <h5>{{ list.description }}</h5>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2 class="text-center">Party Members:</h2>
  {% for user in users %}
    <h5 class="text-center">
      {{user}} <!-- When user page exists, link user names to user pages -->
    </h5> 
  {% endfor %}
  <br>

  {% if cuser != party.owner %}

  <form method="POST" id="leave-party-form" action="{% url 'leave-party' %}">
    {% csrf_token %}
    <input type="hidden" value="{{ party.id }}" name="leave-group-id">
    <button type="submit" data-toggle="popover" data-placement="top" data-content="Leave this Party" class="btn btn-lg btn-danger">&nbsp;Leave Party</button>
  </form>

  {% else %}
  <button data-toggle="popover" data-placement="top" data-content="Cannot leave group you are the owner of" class="btn btn-lg btn-primary">&nbsp;Can't Leave</button>
  {% endif %}
  <br>
  <br>

{% endblock %}
